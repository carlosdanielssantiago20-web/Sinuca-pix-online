<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sinuca Pix Online</title>

<style>
body{
  margin:0;
  background:#021b12;
  color:#fff;
  font-family:Arial;
  text-align:center;
}
h1{margin:10px 0;}
#info{font-size:14px;opacity:.8}
canvas{
  background:radial-gradient(circle at center,#1f7a4a,#0a3a24);
  border-radius:20px;
  box-shadow:0 0 30px rgba(0,255,180,.6);
}
button{
  background:linear-gradient(135deg,#ffd700,#ffb300);
  border:none;
  border-radius:10px;
  padding:12px 20px;
  font-weight:bold;
  margin:8px;
}
#painel{
  display:flex;
  justify-content:space-around;
  font-size:14px;
}
</style>
</head>

<body>

<h1>ðŸŽ± Sinuca Pix Online</h1>
<div id="info">Modo grÃ¡tis â€¢ IA inteligente</div>

<div id="painel">
<div>ðŸŽ– VitÃ³rias: <span id="vit">0</span></div>
<div>ðŸ’° Fichas: <span id="fichas">10</span></div>
</div>

<canvas id="mesa" width="360" height="200"></canvas><br>

<button onclick="jogadaJogador()">ATIRAR</button>

<script>
const c=document.getElementById("mesa");
const ctx=c.getContext("2d");

let fichas=Number(localStorage.fichas||10);
let vitorias=Number(localStorage.vitorias||0);

document.getElementById("fichas").innerText=fichas;
document.getElementById("vit").innerText=vitorias;

let turno="jogador";

const buracos=[
{x:0,y:0},{x:180,y:0},{x:360,y:0},
{x:0,y:200},{x:180,y:200},{x:360,y:200}
];

const branca={x:90,y:100,r:7,dx:0,dy:0};

const bolas=[];
for(let i=1;i<=7;i++){
bolas.push({
x:230+Math.random()*40,
y:40+i*18,
r:7,
n:i,
viva:true
});
}

function desenhar(){
ctx.clearRect(0,0,c.width,c.height);

// buracos
buracos.forEach(b=>{
ctx.beginPath();
ctx.arc(b.x,b.y,14,0,Math.PI*2);
ctx.fillStyle="#000";
ctx.fill();
});

// bolas
bolas.forEach(b=>{
if(!b.viva)return;
ctx.beginPath();
ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
ctx.fillStyle="#f33";
ctx.shadowBlur=8;
ctx.shadowColor="#f00";
ctx.fill();
ctx.shadowBlur=0;
});

// branca
ctx.beginPath();
ctx.arc(branca.x,branca.y,branca.r,0,Math.PI*2);
ctx.fillStyle="#fff";
ctx.shadowBlur=10;
ctx.shadowColor="#fff";
ctx.fill();
ctx.shadowBlur=0;
}

function fisica(){
branca.x+=branca.dx;
branca.y+=branca.dy;
branca.dx*=0.97;
branca.dy*=0.97;

if(Math.abs(branca.dx)<0.05){
branca.dx=branca.dy=0;
if(turno==="ia")setTimeout(jogadaIA,700);
}

if(branca.x<8||branca.x>c.width-8)branca.dx*=-1;
if(branca.y<8||branca.y>c.height-8)branca.dy*=-1;

// colisÃ£o
bolas.forEach(b=>{
if(!b.viva)return;
let dx=b.x-branca.x;
let dy=b.y-branca.y;
let d=Math.hypot(dx,dy);
if(d<branca.r+b.r){
b.viva=false;
}
});

// caÃ§apas
buracos.forEach(b=>{
if(Math.hypot(branca.x-b.x,branca.y-b.y)<12){
branca.x=90;branca.y=100;
branca.dx=branca.dy=0;
}
});
}

function loop(){
fisica();
desenhar();
requestAnimationFrame(loop);
}

function atirar(ang,forca){
branca.dx=Math.cos(ang)*forca;
branca.dy=Math.sin(ang)*forca;
}

function jogadaJogador(){
if(turno!=="jogador")return;
atirar(Math.random()*Math.PI*2,4);
turno="ia";
}

function jogadaIA(){
let alvo=bolas.find(b=>b.viva);
if(!alvo){ganhar();return;}

let dx=alvo.x-branca.x;
let dy=alvo.y-branca.y;
let ang=Math.atan2(dy,dx)+(Math.random()-.5)*0.2;
let dist=Math.hypot(dx,dy);
let forca=Math.min(5,dist/25);

atirar(ang,forca);
turno="jogador";
}

function ganhar(){
vitorias++;
if(vitorias%10===0)fichas+=5;
salvar();
alert("VocÃª venceu!");
reiniciar();
}

function perder(){
fichas=Math.max(0,fichas-1);
salvar();
alert("VocÃª perdeu!");
reiniciar();
}

function salvar(){
localStorage.vitorias=vitorias;
localStorage.fichas=fichas;
document.getElementById("vit").innerText=vitorias;
document.getElementById("fichas").innerText=fichas;
}

function reiniciar(){
bolas.forEach(b=>b.viva=true);
}

loop();
</script>

</body>
</html>
